{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\nimport { defineComponent, ref, reactive, computed, watch, onMounted, onBeforeUnmount, openBlock, createBlock, createVNode, renderSlot } from 'vue';\nimport { getScrollContainer, on, off } from '../utils/dom';\nimport { addResizeListener, removeResizeListener } from '../utils/resize-event';\nvar script = defineComponent({\n  name: \"ElAffix\",\n  props: {\n    zIndex: {\n      type: Number,\n      default: 100\n    },\n    target: {\n      type: String,\n      default: \"\"\n    },\n    offset: {\n      type: Number,\n      default: 0\n    },\n    position: {\n      type: String,\n      default: \"top\"\n    }\n  },\n  emits: [\"scroll\", \"change\"],\n\n  setup(props, {\n    emit\n  }) {\n    const target = ref(null);\n    const root = ref(null);\n    const scrollContainer = ref(null);\n    const state = reactive({\n      fixed: false,\n      height: 0,\n      width: 0,\n      scrollTop: 0,\n      clientHeight: 0,\n      transform: 0\n    });\n    const rootStyle = computed(() => {\n      return {\n        height: state.fixed ? `${state.height}px` : \"\",\n        width: state.fixed ? `${state.width}px` : \"\"\n      };\n    });\n    const affixStyle = computed(() => {\n      if (!state.fixed) {\n        return;\n      }\n\n      const offset = props.offset ? `${props.offset}px` : 0;\n      const transform = state.transform ? `translateY(${state.transform}px)` : \"\";\n      return {\n        height: `${state.height}px`,\n        width: `${state.width}px`,\n        top: props.position === \"top\" ? offset : \"\",\n        bottom: props.position === \"bottom\" ? offset : \"\",\n        transform,\n        zIndex: props.zIndex\n      };\n    });\n\n    const update = () => {\n      const rootRect = root.value.getBoundingClientRect();\n      const targetRect = target.value.getBoundingClientRect();\n      state.height = rootRect.height;\n      state.width = rootRect.width;\n      state.scrollTop = scrollContainer.value === window ? document.documentElement.scrollTop : scrollContainer.value.scrollTop;\n      state.clientHeight = document.documentElement.clientHeight;\n\n      if (props.position === \"top\") {\n        if (props.target) {\n          const difference = targetRect.bottom - props.offset - state.height;\n          state.fixed = props.offset > rootRect.top && targetRect.bottom > 0;\n          state.transform = difference < 0 ? difference : 0;\n        } else {\n          state.fixed = props.offset > rootRect.top;\n        }\n      } else {\n        if (props.target) {\n          const difference = state.clientHeight - targetRect.top - props.offset - state.height;\n          state.fixed = state.clientHeight - props.offset < rootRect.bottom && state.clientHeight > targetRect.top;\n          state.transform = difference < 0 ? -difference : 0;\n        } else {\n          state.fixed = state.clientHeight - props.offset < rootRect.bottom;\n        }\n      }\n    };\n\n    const onScroll = () => {\n      update();\n      emit(\"scroll\", {\n        scrollTop: state.scrollTop,\n        fixed: state.fixed\n      });\n    };\n\n    watch(() => state.fixed, () => {\n      emit(\"change\", state.fixed);\n    });\n    onMounted(() => {\n      if (props.target) {\n        target.value = document.querySelector(props.target);\n\n        if (!target.value) {\n          throw new Error(`target is not existed: ${props.target}`);\n        }\n      } else {\n        target.value = document.documentElement;\n      }\n\n      scrollContainer.value = getScrollContainer(root.value);\n      on(scrollContainer.value, \"scroll\", onScroll);\n      addResizeListener(root.value, update);\n    });\n    onBeforeUnmount(() => {\n      off(scrollContainer.value, \"scroll\", onScroll);\n      removeResizeListener(root.value, update);\n    });\n    return {\n      root,\n      state,\n      rootStyle,\n      affixStyle,\n      update\n    };\n  }\n\n});\n\nfunction render(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createBlock(\"div\", {\n    ref: \"root\",\n    class: \"el-affix\",\n    style: _ctx.rootStyle\n  }, [createVNode(\"div\", {\n    class: {\n      \"el-affix--fixed\": _ctx.state.fixed\n    },\n    style: _ctx.affixStyle\n  }, [renderSlot(_ctx.$slots, \"default\")], 6)], 4);\n}\n\nscript.render = render;\nscript.__file = \"packages/affix/src/index.vue\";\n\nscript.install = app => {\n  app.component(script.name, script);\n};\n\nconst _Affix = script;\nexport default _Affix;","map":{"version":3,"names":["defineComponent","ref","reactive","computed","watch","onMounted","onBeforeUnmount","openBlock","createBlock","createVNode","renderSlot","getScrollContainer","on","off","addResizeListener","removeResizeListener","script","name","props","zIndex","type","Number","default","target","String","offset","position","emits","setup","emit","root","scrollContainer","state","fixed","height","width","scrollTop","clientHeight","transform","rootStyle","affixStyle","top","bottom","update","rootRect","value","getBoundingClientRect","targetRect","window","document","documentElement","difference","onScroll","querySelector","Error","render","_ctx","_cache","$props","$setup","$data","$options","class","style","$slots","__file","install","app","component","_Affix"],"sources":["D:/project/my_blog/blog-ui/node_modules/element-plus/es/el-affix/index.js"],"sourcesContent":["import { defineComponent, ref, reactive, computed, watch, onMounted, onBeforeUnmount, openBlock, createBlock, createVNode, renderSlot } from 'vue';\nimport { getScrollContainer, on, off } from '../utils/dom';\nimport { addResizeListener, removeResizeListener } from '../utils/resize-event';\n\nvar script = defineComponent({\n  name: \"ElAffix\",\n  props: {\n    zIndex: {\n      type: Number,\n      default: 100\n    },\n    target: {\n      type: String,\n      default: \"\"\n    },\n    offset: {\n      type: Number,\n      default: 0\n    },\n    position: {\n      type: String,\n      default: \"top\"\n    }\n  },\n  emits: [\"scroll\", \"change\"],\n  setup(props, { emit }) {\n    const target = ref(null);\n    const root = ref(null);\n    const scrollContainer = ref(null);\n    const state = reactive({\n      fixed: false,\n      height: 0,\n      width: 0,\n      scrollTop: 0,\n      clientHeight: 0,\n      transform: 0\n    });\n    const rootStyle = computed(() => {\n      return {\n        height: state.fixed ? `${state.height}px` : \"\",\n        width: state.fixed ? `${state.width}px` : \"\"\n      };\n    });\n    const affixStyle = computed(() => {\n      if (!state.fixed) {\n        return;\n      }\n      const offset = props.offset ? `${props.offset}px` : 0;\n      const transform = state.transform ? `translateY(${state.transform}px)` : \"\";\n      return {\n        height: `${state.height}px`,\n        width: `${state.width}px`,\n        top: props.position === \"top\" ? offset : \"\",\n        bottom: props.position === \"bottom\" ? offset : \"\",\n        transform,\n        zIndex: props.zIndex\n      };\n    });\n    const update = () => {\n      const rootRect = root.value.getBoundingClientRect();\n      const targetRect = target.value.getBoundingClientRect();\n      state.height = rootRect.height;\n      state.width = rootRect.width;\n      state.scrollTop = scrollContainer.value === window ? document.documentElement.scrollTop : scrollContainer.value.scrollTop;\n      state.clientHeight = document.documentElement.clientHeight;\n      if (props.position === \"top\") {\n        if (props.target) {\n          const difference = targetRect.bottom - props.offset - state.height;\n          state.fixed = props.offset > rootRect.top && targetRect.bottom > 0;\n          state.transform = difference < 0 ? difference : 0;\n        } else {\n          state.fixed = props.offset > rootRect.top;\n        }\n      } else {\n        if (props.target) {\n          const difference = state.clientHeight - targetRect.top - props.offset - state.height;\n          state.fixed = state.clientHeight - props.offset < rootRect.bottom && state.clientHeight > targetRect.top;\n          state.transform = difference < 0 ? -difference : 0;\n        } else {\n          state.fixed = state.clientHeight - props.offset < rootRect.bottom;\n        }\n      }\n    };\n    const onScroll = () => {\n      update();\n      emit(\"scroll\", {\n        scrollTop: state.scrollTop,\n        fixed: state.fixed\n      });\n    };\n    watch(() => state.fixed, () => {\n      emit(\"change\", state.fixed);\n    });\n    onMounted(() => {\n      if (props.target) {\n        target.value = document.querySelector(props.target);\n        if (!target.value) {\n          throw new Error(`target is not existed: ${props.target}`);\n        }\n      } else {\n        target.value = document.documentElement;\n      }\n      scrollContainer.value = getScrollContainer(root.value);\n      on(scrollContainer.value, \"scroll\", onScroll);\n      addResizeListener(root.value, update);\n    });\n    onBeforeUnmount(() => {\n      off(scrollContainer.value, \"scroll\", onScroll);\n      removeResizeListener(root.value, update);\n    });\n    return {\n      root,\n      state,\n      rootStyle,\n      affixStyle,\n      update\n    };\n  }\n});\n\nfunction render(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createBlock(\"div\", {\n    ref: \"root\",\n    class: \"el-affix\",\n    style: _ctx.rootStyle\n  }, [\n    createVNode(\"div\", {\n      class: { \"el-affix--fixed\": _ctx.state.fixed },\n      style: _ctx.affixStyle\n    }, [\n      renderSlot(_ctx.$slots, \"default\")\n    ], 6)\n  ], 4);\n}\n\nscript.render = render;\nscript.__file = \"packages/affix/src/index.vue\";\n\nscript.install = (app) => {\n  app.component(script.name, script);\n};\nconst _Affix = script;\n\nexport default _Affix;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}